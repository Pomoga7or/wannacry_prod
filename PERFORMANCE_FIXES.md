# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ—à–∏–±–æ–∫

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã ‚úÖ

### 1. **Top-level await –≤ App.js (–ö–†–ò–¢–ò–ß–ù–û)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç—Ä–æ–∫–∏ 25-26 –≤ App.js –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ top-level await, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –∫—Ä–∞—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```javascript
// ‚ùå –ë–´–õ–û (–≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫—É)
const data = await get–°ollections(); 
const headerText = await getHeaderText();
```

**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω—ã —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏, –¥–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ö—É–∫ `useDirectusData`

### 2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ lazy loading**
**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å —Å—Ä–∞–∑—É, —É–≤–µ–ª–∏—á–∏–≤–∞—è –Ω–∞—á–∞–ª—å–Ω—ã–π bundle
**–†–µ—à–µ–Ω–∏–µ:** 
- –î–æ–±–∞–≤–ª–µ–Ω lazy loading –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (Home, NotFound, FaultyTerminal)
- –î–æ–±–∞–≤–ª–µ–Ω—ã Suspense boundaries —Å fallback UI
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Header, Footer, Collections —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚ö°

### 3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —à—Ä–∏—Ñ—Ç–æ–≤**
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω `font-display: swap` –¥–ª—è –≤—Å–µ—Ö —à—Ä–∏—Ñ—Ç–æ–≤ (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç FOIT)
- –®—Ä–∏—Ñ—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ woff2 ‚Üí woff (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø–µ—Ä–≤—ã–º–∏)
- –î–æ–±–∞–≤–ª–µ–Ω preload –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —à—Ä–∏—Ñ—Ç–æ–≤ –≤ index.html

### 4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –¥–∞–Ω–Ω—ã—Ö**
**–°–æ–∑–¥–∞–Ω —Ö—É–∫:** `useDirectusData.js`
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Directus –Ω–∞ 5 –º–∏–Ω—É—Ç
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ collections –∏ headerText
- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ preloader

### 5. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è preloader**
**–£–ª—É—á—à–µ–Ω–∏—è:**
- –£–º–µ–Ω—å—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è —Å 5 –¥–æ 4 —Å–µ–∫—É–Ω–¥
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Directus
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –º–∞—Å—Å–∏–≤–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### 6. **–ú–µ–º–æ–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
**Header.jsx:**
- –û–±–µ—Ä–Ω—É—Ç –≤ React.memo –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ª–∏—à–Ω–∏—Ö —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤
- bottomImages –æ–±–µ—Ä–Ω—É—Ç –≤ useMemo

### 7. **Performance utilities**
**–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª:** `utils/performance.js`
- debounce –∏ throttle —Ñ—É–Ω–∫—Ü–∏–∏
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Web Vitals

### 8. **SEO –∏ –º–µ—Ç–∞-—Ç–µ–≥–∏**
**index.html:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–π—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω theme-color
- –î–æ–±–∞–≤–ª–µ–Ω preconnect –∫ Directus API
- –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ—Ç–∞-—Ç–µ–≥–æ–≤

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ üìã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ)
1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è 3D –º–æ–¥–µ–ª–µ–π:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Draco compression –¥–ª—è .glb —Ñ–∞–π–ª–æ–≤
   - –£–º–µ–Ω—å—à–∏—Ç–µ –ø–æ–ª–∏–≥–æ–Ω—ã –≤ –º–æ–¥–µ–ª—è—Ö
   - –î–æ–±–∞–≤—å—Ç–µ LOD (Level of Detail)

2. **Image optimization:**
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ WebP/AVIF
   - –î–æ–±–∞–≤—å—Ç–µ responsive images —Å srcset
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ lazy loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∏–∂–µ fold

3. **Code splitting:**
   - –†–∞–∑–¥–µ–ª–∏—Ç–µ –±–æ–ª—å—à–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ chunks
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ dynamic imports –¥–ª—è –º–æ–¥–∞–ª–æ–≤ –∏ –¥–∏–∞–ª–æ–≥–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ)
4. **Service Worker:**
   - –î–æ–±–∞–≤—å—Ç–µ offline support
   - –ö—ç—à–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
   - –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

5. **Bundle optimization:**
   ```bash
   npm install --save-dev webpack-bundle-analyzer
   npm run build
   npx webpack-bundle-analyzer build/static/js/*.js
   ```

6. **React Three Fiber –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `useFrame` —Å throttling
   - –î–æ–±–∞–≤—å—Ç–µ `frameloop="demand"` –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ shadows –∏ lighting

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ)
7. **CSS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
   - –£–¥–∞–ª–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ CSS (PurgeCSS)
   - –ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ CSS
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CSS containment

8. **Monitoring:**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Google Analytics / Yandex Metrika
   - –î–æ–±–∞–≤—å—Ç–µ error tracking (Sentry)
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Real User Metrics (RUM)

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ê–Ω–∞–ª–∏–∑ bundle size
```bash
npm run build
npx source-map-explorer 'build/static/js/*.js'
```

### Lighthouse audit
```bash
npm install -g lighthouse
lighthouse http://localhost:3000 --view
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Performance
2. –ó–∞–ø–∏—à–∏—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏:
   - FCP (First Contentful Paint) < 1.8s
   - LCP (Largest Contentful Paint) < 2.5s
   - CLS (Cumulative Layout Shift) < 0.1
   - FID (First Input Delay) < 100ms

## –¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (–æ–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è)

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| Initial Bundle | ~800KB | ~400KB | 50% ‚¨áÔ∏è |
| Time to Interactive | ~5s | ~2.5s | 50% ‚¨áÔ∏è |
| First Contentful Paint | ~2.5s | ~1.2s | 52% ‚¨áÔ∏è |
| API Calls –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É | 2 | 2 (cached) | –ö—ç—à ‚úÖ |

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã

### useDirectusData hook
```javascript
import { useDirectusData } from '../hooks/useDirectusData';

function MyComponent() {
  const { collections, headerText, loading, error } = useDirectusData();
  
  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error: {error.message}</div>;
  
  return <div>{/* Use data */}</div>;
}
```

### Performance utilities
```javascript
import { debounce, throttle, getDevicePerformance } from '../utils/performance';

// Debounce search
const handleSearch = debounce((query) => {
  // Search logic
}, 300);

// Throttle scroll
const handleScroll = throttle(() => {
  // Scroll logic
}, 100);

// Check device
const device = getDevicePerformance();
if (device.level === 'low') {
  // Reduce quality
}
```

## Checklist –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º ‚úì

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `npm run build`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä bundle (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 500KB gzipped)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å Lighthouse audit (score > 90)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ lazy loaded –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤ –º–µ–¥–ª–µ–Ω–Ω–æ–π —Å–µ—Ç–∏ (3G)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Web Vitals –≤ production

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤
–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ React –∏ Three.js.